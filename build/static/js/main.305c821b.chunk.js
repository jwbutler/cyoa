(this.webpackJsonpcyoa=this.webpackJsonpcyoa||[]).push([[0],[,,,,,,,,,function(e){e.exports=JSON.parse('[{"id":"backyard","name":"Backyard","description":"You\'re in the backyard.  There\'s a swing set on one end of the yard, and a small shed on another side.","actions":[{"text":"Go back inside","scene":"dining_room"},{"text":"Go in the shed","scene":"shed_locked","forbids":{"items":["shed_key"]}},{"text":"Go in the shed","scene":"shed_inside","requires":{"items":["shed_key"]}},{"text":"Go to the driveway","scene":"driveway"}]},{"id":"den","name":"Den","description":"You\'re in the den.  There\'s a long desk here with two desktop computers on it.  You can go into the dining room, the living room, or the family room.","actions":[{"text":"Go to the dining room","scene":"dining_room"},{"text":"Go to the living room","scene":"living_room"},{"text":"Go to the family room","scene":"family_room"}]},{"id":"dining_room","name":"Dining Room","description":"You\'re in the dining room.  It has red wallpaper and a large dining table in the middle of the room.  There is a large window through which you can see the backyard.  There\'s a door that leads to the backyard.  You can also go to the den, the kitchen, or the main hall","actions":[{"text":"Go to the main hall","scene":"main_hall"},{"text":"Go to the kitchen","scene":"kitchen"},{"text":"Go to the den","scene":"den"},{"text":"Go outside","scene":"backyard"}]},{"id":"downstairs_bathroom","name":"Downstairs Bathroom","description":"You\'re in the downstairs bathroom.  There\'s a toilet and a sink here.","actions":[{"text":"Exit","scene":"front_hall"}]},{"id":"driveway","name":"Driveway","description":"You\'re in the driveway.  There\'s a garage here with two cars outside it.  You can go to the backyard or into the kitchen through the back door.","actions":[{"text":"Go to the kitchen","scene":"kitchen"},{"text":"Go in the garage","scene":"garage"},{"text":"Go to the backyard","scene":"backyard"}]},{"id":"family_room","name":"Family Room","description":"You\'re in the family room.  There\'s a large TV here, and a couch and a recliner in front of it.  There are several game consoles and controllers on the floor.  There\'s a cabinet next to the TV containing a DVD player and various videos.","actions":[{"text":"Go to the den","scene":"den"}]},{"id":"front_hall","name":"Front Hall","description":"You\'re in the front hall.  The front door of the house is here.  The entrance to the downstairs bathroom is to the right of the door.  You can also go further inside to the main hall.","actions":[{"text":"Go outside","scene":"outside_front_door"},{"text":"Go into the bathroom","scene":"downstairs_bathroom"},{"text":"Go further inside","scene":"main_hall"}]},{"id":"garage","name":"Garage","description":"You\'re in the garage.  There\'s a snowblower here, along with several trash cans and various other junk.  It\'s big enough for two cars, but there\'s currently only enough free space for one.","actions":[{"text":"Go outside","scene":"driveway"}]},{"id":"kitchen","name":"Kitchen","description":"You\'re in the kitchen.  There\'s a refrigerator, stove, and a counter with a sink here, with shelves and cabinets above them.  There\'s a dining table on the other side of the room.  You can go out the back door into the driveway, or go to the main hall or the dining room.","actions":[{"text":"Go outside","scene":"driveway"},{"text":"Go to the main hall","scene":"main_hall"},{"text":"Go to the dining room","scene":"dining_room"},{"text":"Check the counter drawer","scene":"kitchen_counter_drawer","forbids":{"items":["shed_key"]},"adds":{"items":["shed_key"]}},{"text":"Check the counter drawer","scene":"kitchen_counter_drawer_without_key","requires":{"items":["shed_key"]}}]},{"id":"kitchen_counter_drawer","name":"Drawer","description":"There\'s a bunch of junk in here.  You also find a key!  You take the key.","actions":[{"text":"Back","scene":"kitchen"}]},{"id":"kitchen_counter_drawer_without_key","name":"Drawer","description":"There\'s nothing in here but junk.","actions":[{"text":"Back","scene":"kitchen"}]},{"id":"living_room","name":"Living Room","description":"You\'re in the living room.  There is a couch and several chairs here.  There\'s a stereo system on one wall, with a record player and a shelf containing an extensive record collection.","actions":[{"text":"Go to the den","scene":"den"},{"text":"Go to the main hall","scene":"main_hall"}]},{"id":"main_hall","name":"Main Hall","description":"You\'re in the main hall.  There are stairs that lead to the second floor, as well as entrances to the dining room, kitchen room, living room, and the front hall.  There\'s an upright piano, as well as a desk.","actions":[{"text":"Go to the kitchen","scene":"kitchen"},{"text":"Go to the living room","scene":"living_room"},{"text":"Go to the dining room","scene":"dining_room"},{"text":"Go to the front hall","scene":"front_hall"}]},{"id":"outside_front_door","name":"Outside the House","description":"You are standing outside the front door of the house.","actions":[{"text":"Go inside","scene":"front_hall"}]},{"id":"shed_inside","name":"Shed","description":"You\'re in the shed.  It\'s stuffed with assorted outdoor toys, such as frisbees and various types of ball.","actions":[{"text":"Go outside","scene":"backyard"}]},{"id":"shed_locked","name":"Shed","description":"It\'s locked.  Maybe there\'s a key somewhere...","actions":[{"text":"Back","scene":"backyard"}]}]')},,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o,i=n(1),r=n.n(i),s=n(8),a=n.n(s),c=n(4),d=n(7),h=n(2),l=n(10),u=(n(15),n(0)),m=["type","size","onClick","children"],f=function(e){var t=e.type,n=void 0===t?"white":t,o=e.size,i=void 0===o?"medium":o,r=e.onClick,s=e.children,a=Object(l.a)(e,m),c=["button",n,i].join(" ");return Object(u.jsx)("button",Object(h.a)(Object(h.a)({className:c,onClick:r},a),{},{children:s}))},b=function(e){var t=e.action,n=e.controller;return function(){var e=n.inventory;return!(t.requires&&t.requires.items&&!t.requires.items.every((function(t){return e.includes(t)})))&&!(t.forbids&&t.forbids.items&&t.forbids.items.find((function(t){return e.includes(t)})))}()?Object(u.jsx)(f,{type:"white",size:"medium",onClick:function(){var e=t.adds,o=t.removes,i=t.scene,r=n.inventory,s=n.setInventory,a=n.setSceneId;if(i&&a(i),e){var c=e.items;c&&s([].concat(Object(d.a)(r),Object(d.a)(c)))}if(o){var h=o.items;h&&s(r.filter((function(e){return h&&!h.includes(e)})))}},children:t.text}):null},y=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},g=window.localStorage,x=function(){var e,t=g.getItem("save");if(t)try{return e=t,JSON.parse(atob(e))}catch(n){console.log(n)}return null},v=function(e){window.localStorage.setItem("save",function(e){return btoa(JSON.stringify(e))}(e))};(o||(o={})).create=function(e){var t={sceneId:e.sceneId,inventory:e.inventory},n=function(t){var n=t.sceneId,o=t.inventory,i=e.setSceneId,r=e.setInventory;i(n),r(o)};return Object(h.a)(Object(h.a)({},e),{},{currentState:t,load:n,restart:function(){return n(e.initialState)},save:function(){var n=e.setSavedGame;v(t),n(t)}})};var j=o,p=(n(17),function(e){var t=e.title,n=e.body,o=e.x,i=void 0===o||o,r=e.ok,s=void 0===r||r,a=e.cancel,c=void 0!==a&&a,d=e.handleClose;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"lightbox-background"}),Object(u.jsxs)("div",{className:"lightbox",children:[i&&Object(u.jsx)("div",{className:"lightbox-x",onClick:function(){return d(!1)},children:"\xd7"}),Object(u.jsx)("h2",{className:"lightbox-title",children:t||" "}),n&&Object(u.jsx)("p",{className:"lightbox-body",children:n}),(s||c)&&Object(u.jsxs)(u.Fragment,{children:[s&&Object(u.jsx)(f,{type:"white",size:"medium",onClick:function(){return d(!0)},children:"OK"}),c&&Object(u.jsx)(f,{type:"white",size:"medium",onClick:function(){return d(!1)},children:"Cancel"})]})]})]})}),w=(n(18),function(e){var t=e.controller,n=function(){t.savedGame?(t.load(t.savedGame),t.setLightbox(Object(u.jsx)(p,{title:"Game loaded.",x:!1,handleClose:function(){return t.setLightbox(null)}}))):(t.setLightbox(Object(u.jsx)(p,{title:"Error",body:"No saved game found.",x:!1,handleClose:function(){return t.setLightbox(null)}})),t.setSavedGame(null))},o=function(){t.save(),t.setLightbox(Object(u.jsx)(p,{title:"Game saved",x:!1,handleClose:function(){return t.setLightbox(null)}}))};return Object(u.jsxs)("div",{className:"footer",children:[Object(u.jsx)(f,{type:"white",size:"small",onClick:function(){t.setLightbox(Object(u.jsx)(p,{title:"Are you sure?",body:"You will lose any unsaved progress.",x:!1,cancel:!0,handleClose:function(e){e&&t.restart(),t.setLightbox(null)}}))},children:"New"}),Object(u.jsx)(f,{type:"white",size:"small",onClick:function(){y(t.currentState,t.savedGame)?o():t.setLightbox(Object(u.jsx)(p,{title:"Are you sure?",body:"You will overwrite your existing saved game.",x:!1,cancel:!0,handleClose:function(e){e?o():t.setLightbox(null)}}))},children:"Save"}),Object(u.jsx)(f,{type:"white",size:"small",onClick:function(){y(t.currentState,t.savedGame)||y(t.currentState,t.initialState)?n():t.setLightbox(Object(u.jsx)(p,{title:"Are you sure?",body:"You will lose any unsaved progress.",x:!1,cancel:!0,handleClose:function(e){e?n():t.setLightbox(null)}}))},disabled:!t.savedGame,children:"Load"})]})}),k=(n(19),function(e){var t=e.title,n=e.description,o=e.children,r=Object(i.createRef)();return Object(i.useEffect)((function(){r.current.scrollTo(0,0)})),Object(u.jsxs)("div",{className:"menu",ref:r,children:[Object(u.jsx)("h1",{className:"menu-title",children:t}),Object(u.jsx)("p",{className:"menu-description",children:n}),o]})}),O=(n(20),function(e){var t=e.scenes,n=e.initialState,o=Object(i.useState)(n.sceneId),r=Object(c.a)(o,2),s=r[0],a=r[1],d=Object(i.useState)(n.inventory),h=Object(c.a)(d,2),l=h[0],m=h[1],f=Object(i.useState)(null),y=Object(c.a)(f,2),g=y[0],v=y[1],p=Object(i.useState)(x()),O=Object(c.a)(p,2),_=O[0],G=O[1],S=j.create({initialState:n,sceneId:s,setSceneId:a,inventory:l,setInventory:m,lightbox:g,setLightbox:v,savedGame:_,setSavedGame:G}),T=t[s];return Object(u.jsxs)("div",{className:"app",children:[Object(u.jsx)(k,{title:T.name,description:T.description,children:T.actions.map((function(e,t){return Object(u.jsx)(b,{action:e,controller:S},"".concat(e.text,"_").concat(t))}))}),Object(u.jsx)(w,{controller:S}),g]})}),_=n(9),G=function(e){Y(C(e),e),Y(e.hasOwnProperty("id")&&"string"===typeof e.id,e),Y(e.hasOwnProperty("name")&&"string"===typeof e.name,e),e.hasOwnProperty("description")&&Y("string"===typeof e.description,e),Y(e.hasOwnProperty("actions")&&Array.isArray(e.actions),e);var t=e.actions.map((function(e){return S(e)}));return Object(h.a)(Object(h.a)({},e),{},{actions:t})},S=function(e){return Y(e.hasOwnProperty("text")&&"string"===typeof e.text,e),e.hasOwnProperty("scene")&&Y("string"===typeof e.scene,e),e.hasOwnProperty("requires")&&(Y(C(e.requires),e),e.requires.hasOwnProperty("items")&&(Y(Array.isArray(e.requires.items),e),e.requires.items.forEach((function(t){return Y("string"===typeof t,e)})))),e.hasOwnProperty("forbids")&&(Y(C(e.forbids),e),e.forbids.hasOwnProperty("items")&&(Y(Array.isArray(e.forbids.items),e),e.forbids.items.forEach((function(t){return Y("string"===typeof t,e)})))),e.hasOwnProperty("adds")&&(Y(C(e.adds),e),e.adds.hasOwnProperty("items")&&(Y(Array.isArray(e.adds.items),e),e.adds.items.forEach((function(t){return Y("string"===typeof t,e)})))),e.hasOwnProperty("removes")&&(Y(C(e.removes),e),e.removes.hasOwnProperty("items")&&(Y(Array.isArray(e.removes.items),e),e.removes.items.forEach((function(t){return Y("string"===typeof t,e)})))),e},T=function(e){Object.values(e).forEach((function(t){t.actions.forEach((function(t){t.scene&&Y(null!=e[t.scene],t)}))}))},Y=function(e,t){if(!e)throw new Error("Invalid definition: "+JSON.stringify(t))},C=function(e){return"object"===typeof e&&!Array.isArray(e)},I=(n(21),function(){var e={};return _.forEach((function(t){var n=G(t),o=n.id;e[o]=n})),T(e),e}());a.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(O,{scenes:I,initialState:{sceneId:"outside_front_door",inventory:[]}})}),document.getElementById("root"))}],[[22,1,2]]]);
//# sourceMappingURL=main.305c821b.chunk.js.map